# hh-architecture

### Q1
представим, что у нас есть данные, которые мы очень часто читаем по сравнению с другими(например словарь стран). Как можно это оптимизировать?
### A1
Использовать кеширование. Сохранять например на день (месяц и т.д.) и сбрасывать этот кеш при операциях изменяющих текущее состояние. В ключах отразить используемые параметры.

### Q2
Что можно сделать, если таблица вакансий стала слишком большой? Какие есть решения на уровне текущей базы данных? Можно ли ее чем то заменить?
### A2
Разбить таблицу на несколько по признаку, который позволяет отсеить часть данных без вреда для логики. Чаще всего это дата, возможно какие то типы и прочее. Конкретно с вакансиями разделил бы по регионам, если мало регионов по городам. Скорей всего большинство запросов будут идти в пределах одного региона. Для запросов по всем регионам (например в статистике) останется возможность заджойнить данные из разных таблиц. Если бы и городов было мало можно раздробить по дате. Скорей всего вакансии прошлого года это уже устаревшие данные. Ну и далее следуя этой логике добить удовлетворительного уровня разбиения. 

### Q3
Какие вы видите узкие места, возможно неправильно выбранные технологии в текущей схеме(можно рассмотреть как “нашу” схему, так и схему настоящего hh.ru)
### A3
Рассматриваю схему hh, которая приведена и объяснена на лекции: 
* К выбору технологий вопросов нет, как минимум потому, что нет понимания а зачем... Я считаю, что любую технологию можно использовать если она будет выполнять поставленные задачи. Перед выбором или заменой должен проводиться тщательный анализ всех плюсов и минусов, иначе возможна ситуация заменить "шило на мыло".
* Из недостатков, отмеченных на лекции, это рекурентная зависимость hhid и hh-session. Рекурентные зависимости могут увести в бесконечный цикл и как результат пустую растрату ресурсов на сервере, а для пользователя возврат ответа про превышение таймаута. В худшем случае эта ситуация может привести к обработке сервером только этих пустышек и возможно накоплению пула запросов. Подобные зависимости могут возникать при неправильном разделение обязанностей между сервисами. Исправляется перераспределением обязанностей между сервисами. 
* Субъективно мне не нравятся связи на уровне микросервис-микросервис. Существуют ситуация когда это оправдано, но из лекции это не очевидно. Проблема тут в том что от интерфейса микросервиса зависит не только слой мидлварей, но и другой микросервис. И в случае желания заменить его нужно будет учитывать все точки использования. Чем их меньше тем лучше, я считаю. Поэтому если микросервисы не объединены одной задачей, зависимости пустил бы через слой мидлварей.

### Примечания
а как отвечать на эти вопросы чистым фронтендерам? Лекций не было, с такими проблемами фронты не сталкиваются.